var app=function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.controller=void 0,n(1),n(2);var r=n(22),o=i(r);t.controller=new o.default},function(e,t){},function(e,t,n){"use strict";n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21)},function(e,t,n){e.exports=n.p+"img/m01d.svg"},function(e,t,n){e.exports=n.p+"img/m01n.svg"},function(e,t,n){e.exports=n.p+"img/m02d.svg"},function(e,t,n){e.exports=n.p+"img/m02n.svg"},function(e,t,n){e.exports=n.p+"img/m03d.svg"},function(e,t,n){e.exports=n.p+"img/m03n.svg"},function(e,t,n){e.exports=n.p+"img/m04d.svg"},function(e,t,n){e.exports=n.p+"img/m04n.svg"},function(e,t,n){e.exports=n.p+"img/m09d.svg"},function(e,t,n){e.exports=n.p+"img/m09n.svg"},function(e,t,n){e.exports=n.p+"img/m10d.svg"},function(e,t,n){e.exports=n.p+"img/m10n.svg"},function(e,t,n){e.exports=n.p+"img/m11d.svg"},function(e,t,n){e.exports=n.p+"img/m11n.svg"},function(e,t,n){e.exports=n.p+"img/m13d.svg"},function(e,t,n){e.exports=n.p+"img/m13n.svg"},function(e,t,n){e.exports=n.p+"img/m50d.svg"},function(e,t,n){e.exports=n.p+"img/m50n.svg"},function(e,t,n){e.exports=n.p+"img/wheel.svg"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(23),a=i(s),u=n(32),c=i(u),l=function(){function e(){var t=this;r(this,e),this._model=new a.default,this._view=new c.default,this._model.on(a.default.EVENTS.onDataReady,function(e){t._view.currentCity.render(e.main).then(function(n){t._view.currentCity.details.render(e.details,t._view.currentCity.getFreeSpaceFroDetails())}).catch(function(e){throw Error(e)}),t._view.nexDays.render(e.days),t._view.hidePreloader(),t._view.hideWelcomeScreen(),t._view.currentCity.init(),t._view.cityViewer.hidePreloaderOnCity(document.querySelector("[data-geoid = '"+e.id+"']")),t._view.cityViewer.unlockViewer(),t._view.menu.enable(),t._view.hideRefreshing(),t._view.cityViewer.hidePreloaderOnAddCity(),t._view.currentCity.hourly.refresh(e.hourly),t._view.search.enable()}),this._model.on(a.default.EVENTS.onFetchDataError,function(){t._view.search.enable(),t._view.cityViewer.hidePreloaderOnAddCity(),setTimeout(function(){t._view.showMessage("Connection error <br> try again or choose another city")})}),this._model.on(a.default.EVENTS.onRestoreDataBegin,function(){t._view.showPreloader(),t._view.menu.disable(),t._view.menu.removeStateIsEmpty()}),this._model.on(a.default.EVENTS.onEmptyStorage,function(){t._view.showWelcomeScreen()}),this._model.on(a.default.EVENTS.onAddCity,function(e){t._view.cityViewer.addCity({name:e.name,geoId:e.id,tzOffsetMinutes:e.tzOffsetMinutes}),t._view.menu.removeStateIsEmpty()}),this._model.on(a.default.EVENTS.onAddListOfCities,function(e){t._view.cityViewer.addListOfCities(e)}),this._view.currentCity.on(c.default.EVENTS.CurrentCity.onReloadDataRequest,function(e){t._model.reloadData(),t._view.showRefreshing(),t._view.cityViewer.lockViewer()}),this._view.currentCity.on(c.default.EVENTS.CurrentCity.onHiddenMoreDetails,function(){}),this._view.currentCity.on(c.default.EVENTS.CurrentCity.onShowMoreDetails,function(){return t._getDataForHourlyView().length?void t._view.currentCity.hourly.render(t._getDataForHourlyView()):void t._view.currentCity.hourly.renderNA()}),this._view.currentCity.on(c.default.EVENTS.CurrentCity.onHideMoreDetails,function(){t._view.currentCity.hourly.destroy()}),this._view.search.on(c.default.EVENTS.Search.onGetCity,function(e){var n={};try{n.id=e.geonameId,n.tzOffsetMinutes=e.tzOffsetMinutes}catch(e){return}t._view.search.disable(),t._model.getDataForNewCity(n),t._view.cityViewer.lockViewer(),t._model.isCityInDb(n.id)?(t._view.cityViewer._setActiveClass(document.querySelector("[data-geoid = '"+n.id+"']")),t._view.cityViewer.showPreloaderOnCity(document.querySelector("[data-geoid = '"+n.id+"']")),document.querySelector("[data-geoid = '"+n.id+"']").scrollIntoView()):t._view.cityViewer.showPreloaderOnAddCity()}),this._view.cityViewer.on(c.default.EVENTS.CityViewer.onSelectedCity,function(e){t._model.getDataForNewCity({id:e.geoId,tzOffsetMinutes:e.tzOffsetMinutes}),t._view.cityViewer.showPreloaderOnCity(document.querySelector("[data-geoid = '"+e.geoId+"']")),t._view.cityViewer.lockViewer()}),this._view.cityViewer.on(c.default.EVENTS.CityViewer.onDeleteCity,function(e){t._model.removeCityFromDb(e)}),this._view.cityViewer.on(c.default.EVENTS.CityViewer.onDeletAllCities,function(){t._view.currentCity.destroy(),t._view.nexDays.destroy(),t._view.showWelcomeScreen(),t._view.menu.setStateIsEmpty()}),this._model.checkLocalStorage()}return o(e,[{key:"_getDataForHourlyView",value:function(){return this._model._db.activeCity.hourly}}]),e}();t.default=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(24),a=i(s),u=n(25),c=i(u),l=n(30),h=i(l),d=function(){function e(){r(this,e),this._db=a.default,this._fetchdata=new c.default,this._fetchdata.on(c.default.EVENTS.onDataFetched,this.dataHandler.bind(this)),this._fetchdata.on(c.default.EVENTS.onDataFetchError,this.hadnleError.bind(this)),this.tzOffsetMinutes=0}return o(e,[{key:"_getUrls",value:function(e,t){return[t.cross+t.url+t.weather+"?id="+e.id+"&units=metric&APPID="+t.appid,t.cross+t.url+t.forecast+"?id="+e.id+"&units=metric&APPID="+t.appid]}},{key:"getData",value:function(e){this._fetchdata.getData(this._getUrls(e,this._db.api))}},{key:"getDataForNewCity",value:function(e){this.getData(e),this.tzOffsetMinutes=e.tzOffsetMinutes}},{key:"dataHandler",value:function(t){this._writeDataForMain(t),this._writeDataForDetails(t),this._transformData(t),this._cityIsExist(t[0].id)?(this._setActiveCity(t[0].id),this.trigger(e.EVENTS.onSetActiveCity,{id:t[0].id}),this.trigger(e.EVENTS.onDataReady,this._db.activeCity)):(this._addCityToDb({name:t[0].name,id:t[0].id,active:!0,weight:this._setWeight(),tzOffsetMinutes:this.tzOffsetMinutes}),this._setActiveCity(t[0].id),this.trigger(e.EVENTS.onAddCity,{name:t[0].name,id:t[0].id,tzOffsetMinutes:this.tzOffsetMinutes}),this.trigger(e.EVENTS.onDataReady,this._db.activeCity)),this._saveDataToLocalStorage()}},{key:"isCityInDb",value:function(e){return this._cityIsExist(e)}},{key:"removeCityFromDb",value:function(e){delete this._db.cities[e],this._saveDataToLocalStorage()}},{key:"_cityIsExist",value:function(e){return!!this._db.cities[e]}},{key:"_setActiveCity",value:function(e){for(var t in this._db.cities)this._db.cities.hasOwnProperty(t)&&(this._db.cities[t].active=!1);this._db.cities[e].active=!0}},{key:"_addCityToDb",value:function(e){this._db.cities[e.id]=e}},{key:"_setWeight",value:function(){var e=Object.keys(this._db.cities),t=this._db.cities;if(0===e.length)return 0;for(var n=[],i=0;i<e.length;i++)n.push(t[e[i]].weight);return Math.min.apply(Math,n)-1}},{key:"_writeDataForMain",value:function(e){var t=this._db.activeCity,n=e[0];t.id=n.id,t.tzOffsetMinutes=this.tzOffsetMinutes,t.main.name=n.name,t.main.weather=n.weather[0].main,t.main.temp=Math.round(n.main.temp),t.main.data=(new Date).toLocaleString("en-US",{day:"numeric",month:"short",weekday:"short"}),t.main.img="img/"+this._db.transformIcons(n.weather[0].icon)+".svg"}},{key:"_writeDataForDetails",value:function(e){var t=[],n=e[0],i=this._db.getDetailsUnits.bind(this._db);t.push([i("pressure").str,Math.round(n.main.pressure),i("pressure").unit]),t.push([i("humidity").str,Math.round(n.main.humidity),i("humidity").unit]),t.push([i("wind").str,Math.round(n.wind.speed),i("wind").unit]),t.push(["Sunrise",new Date(+(n.sys.sunrise+"000")).toLocaleString("ru",{timezone:"UTC",hour:"numeric",minute:"numeric"})]),t.push(["Sunset",new Date(+(n.sys.sunset+"000")).toLocaleString("ru",{hour:"numeric",minute:"numeric"})]),this._db.activeCity.details=t}},{key:"_transformData",value:function(e){var t=e[1].list,n={},i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var u=s.value,c=new Date(1e3*u.dt),l=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate();n[l]||(n[l]=[]),n[l].push(u)}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}var h=new Date,d=n[h.getFullYear()+"-"+(h.getMonth()+1)+"-"+h.getDate()];this._writeDataForTodayHourly(d);var f=d?Object.keys(n).slice(1):Object.keys(n),p=[],v=!0,y=!1,m=void 0;try{for(var g,_=f[Symbol.iterator]();!(v=(g=_.next()).done);v=!0){var b=g.value;p.push(n[b])}}catch(e){y=!0,m=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw m}}this._writeDataForNextDays(p)}},{key:"_writeDataForTodayHourly",value:function(e){var t=[];if(e){var n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t.push({time:new Date(+(a.dt+"000")).toLocaleString("RU",{hour:"numeric",minute:"numeric",timezone:"UTC"}),temp:parseInt(a.main.temp)})}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}this._db.activeCity.hourly=t}}},{key:"_writeDataForNextDays",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;t.push({hourly:{},img:"img/"+this._db.transformIcons(this._getCurentDataForNextDay("weather.0.icon",a).slice(0,-1)+"d")+".svg",data:new Date(+(a[0].dt+"000")).toLocaleString("en-US",{day:"numeric",month:"short"}),main:this._getCurentDataForNextDay("weather.0.main",a),temp:{day:Math.round(this._getCurentDataForNextDay("main.temp",a))}})}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}this._db.activeCity.days=t}},{key:"_getCurentDataForNextDay",value:function(e,t){function n(e,t){var i=e.split("."),r=t[i[0]];if(!r)throw Error("There is no such property");return i.length>1?n(i.slice(1).join("."),r):r}return t[4]?n(e,t[4]):n(e,t[t.length-1])}},{key:"hadnleError",value:function(e){"FetchDataError"===e.name&&this.trigger(this.constructor.EVENTS.onFetchDataError)}},{key:"_firstLetterToUpperCase",value:function(e){return e[0].toUpperCase()+e.slice(1)}},{key:"reloadData",value:function(){this.getData({id:this._db.activeCity.id})}},{key:"checkLocalStorage",value:function(){if(localStorage.getItem("cities")){var t=JSON.parse(localStorage.getItem("cities"));this._db.cities=t,this._restoreData(),this.trigger(e.EVENTS.onRestoreDataBegin)}else this.trigger(e.EVENTS.onEmptyStorage)}},{key:"_getActiveCity",value:function(){var e=this._db.cities,t={};for(var n in e)e.hasOwnProperty(n)&&e[n].active&&(t=e[n]);return t}},{key:"_restoreData",value:function(){var t=this._db.cities,n=this._transformDataFromObjToArray(t),i=n.slice().sort(function(e,t){return e.weight>t.weight});this.trigger(e.EVENTS.onAddListOfCities,i),this.getData(this._getActiveCity())}},{key:"_isEmptyObj",value:function(e){for(var t in e)return!1;return!0}},{key:"_clearLocalStorage",value:function(){localStorage.removeItem("cities")}},{key:"_transformDataFromObjToArray",value:function(e){var t=[],n=Object.keys(e),i=!0,r=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var u=s.value;t.push(e[u])}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return t}},{key:"_saveDataToLocalStorage",value:function(){if(this._isEmptyObj(this._db.cities))return void this._clearLocalStorage();var e=JSON.stringify(this._db.cities);localStorage.setItem("cities",e)}}],[{key:"EVENTS",get:function(){return{onDataReady:"onDataReady",onDataReload:"onDataReload",onAddCity:"onAddCity",onSetActiveCity:"onSetActiveCity",onAddListOfCities:"onAddListOfCities",onRestoreDataBegin:"onRestoreDataBegin",onEmptyStorage:"onEmptyStorage",onFetchDataError:"onFetchDataError",FetchData:c.default.EVENTS}}}]),e}();t.default=d;for(var f in h.default)d.prototype[f]=h.default[f]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={api:{url:"http://api.openweathermap.org/data/2.5/",weather:"weather",forecast:"forecast",appid:"01f8517a7337057f1ed1f0d72f195c73",cross:"https://cors-anywhere.herokuapp.com/"},activeCity:{id:"",main:{},details:[],hourly:[],days:[]},units:{pressure:{str:"Pressure",unit:" hPa"},humidity:{str:"Humidity",unit:" %"},wind:{str:"Wind",unit:" m/s"}},getDetailsUnits:function(e){return this.units[e]},cities:{},iconsMap:{"01d":"m01d","01n":"m01n","02d":"m02d","02n":"m02n","03d":"m03d","03n":"m03n","04d":"m04d","04n":"m04n","09d":"m09d","09n":"m09n","10d":"m10d","10n":"m10n","11d":"m11d","11n":"m11n","13d":"m13d","13n":"m13n","50d":"m50d","50n":"m50n"},transformIcons:function(e){return this.iconsMap[e]}};t.default=n},function(e,t,n){(function(e,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(30),u=r(a),c=n(31),l=function(){function t(){o(this,t)}return s(t,[{key:"getData",value:function(t){var n=e.resolve(),r=[],o=this;this.trigger("onStartFetchData"),t.forEach(function(e){n=n.then(function(){return i(e,{mode:"cors"})}).then(function(e){if(200!==e.status){var t=Error(e.statusText);throw t.code=e.status,t}return e.json()}).catch(function(e){throw"SyntaxError"===e.name?new c.DataReadError("Синтаксическая ошибка в данных полученных с сервера",e):new c.FetchDataError(e.message,e)}).then(function(e){r.push(e)})}),n.then(function(){o.trigger(o.constructor.EVENTS.onDataFetched,r)}).catch(function(e){o.trigger(o.constructor.EVENTS.onDataFetchError,e)})}}],[{key:"EVENTS",get:function(){return{onDataFetched:"onDataFetched",onDataFetchError:"onDataFetchError",onStartFetchData:"onStartFetchData"}}}]),t}();t.default=l;for(var h in u.default)l.prototype[h]=u.default[h]}).call(t,n(26),n(29))},function(e,t,n){var i,r;(function(o,s,a){"use strict";var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.0.5
	 */
!function(o,s){"object"===u(t)&&void 0!==e?e.exports=s():(i=s,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r)))}(void 0,function(){function e(e){return"function"==typeof e||"object"===(void 0===e?"undefined":u(e))&&null!==e}function t(e){return"function"==typeof e}function i(e){J=e}function r(e){K=e}function s(){return function(){return o.nextTick(f)}}function c(){return void 0!==G?function(){G(f)}:d()}function l(){var e=0,t=new ee(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<X;e+=2){var t=ie[e],n=ie[e+1];t(n),ie[e]=void 0,ie[e+1]=void 0}X=0}function p(){try{var e=n(28);return G=e.runOnLoop||e.runOnContext,c()}catch(e){return d()}}function v(e,t){var n=arguments,i=this,r=new this.constructor(m);void 0===r[oe]&&V(r);var o=i._state;return o?!function(){var e=n[o-1];K(function(){return I(o,r,e,i._result)})}():A(i,r,e,t),r}function y(e){var t=this;if(e&&"object"===(void 0===e?"undefined":u(e))&&e.constructor===t)return e;var n=new t(m);return C(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ce.error=e,ce}}function w(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function E(e,t,n){K(function(e){var i=!1,r=w(n,t,function(n){i||(i=!0,t!==n?C(e,n):x(e,n))},function(t){i||(i=!0,D(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,D(e,r))},e)}function S(e,t){t._state===ae?x(e,t._result):t._state===ue?D(e,t._result):A(t,void 0,function(t){return C(e,t)},function(t){return D(e,t)})}function T(e,n,i){n.constructor===e.constructor&&i===v&&n.constructor.resolve===y?S(e,n):i===ce?D(e,ce.error):void 0===i?x(e,n):t(i)?E(e,n,i):x(e,n)}function C(t,n){t===n?D(t,g()):e(n)?T(t,n,b(n)):x(t,n)}function k(e){e._onerror&&e._onerror(e._result),L(e)}function x(e,t){e._state===se&&(e._result=t,e._state=ae,0!==e._subscribers.length&&K(L,e))}function D(e,t){e._state===se&&(e._state=ue,e._result=t,K(k,e))}function A(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+ae]=n,r[o+ue]=i,0===o&&e._state&&K(L,e)}function L(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<t.length;s+=3)i=t[s],r=t[s+n],i?I(n,i,r,o):r(o);e._subscribers.length=0}}function O(){this.error=null}function M(e,t){try{return e(t)}catch(e){return le.error=e,le}}function I(e,n,i,r){var o=t(i),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if(s=M(i,r),s===le?(c=!0,a=s.error,s=null):u=!0,n===s)return void D(n,_())}else s=r,u=!0;n._state!==se||(o&&u?C(n,s):c?D(n,a):e===ae?x(n,s):e===ue&&D(n,s))}function N(e,t){try{t(function(t){C(e,t)},function(t){D(e,t)})}catch(t){D(e,t)}}function P(){return he++}function V(e){e[oe]=he++,e._state=void 0,e._result=void 0,e._subscribers=[]}function j(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[oe]||V(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&x(this.promise,this._result))):D(this.promise,R())}function R(){return Error("Array Methods must be provided an Array")}function H(e){return new j(this,e).promise}function q(e){var t=this;return new t(Y(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(m);return D(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e){this[oe]=P(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&z(),this instanceof $?N(this,e):B())}function U(){var e=void 0;if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=$}var W=void 0;W=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=W,X=0,G=void 0,J=void 0,K=function(e,t){ie[X]=e,ie[X+1]=t,X+=2,2===X&&(J?J(f):re())},Z="undefined"!=typeof window?window:void 0,Q=Z||{},ee=Q.MutationObserver||Q.WebKitMutationObserver,te="undefined"==typeof self&&void 0!==o&&"[object process]"==={}.toString.call(o),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=Array(1e3),re=void 0;re=te?s():ee?l():ne?h():void 0===Z?p():d();var oe=Math.random().toString(36).substring(16),se=void 0,ae=1,ue=2,ce=new O,le=new O,he=0;return j.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===se&&n<e;n++)this._eachEntry(t[n],n)},j.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===y){var r=b(e);if(r===v&&e._state!==se)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===$){var o=new n(m);T(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},j.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===se&&(this._remaining--,e===ue?D(i,n):this._result[t]=n),0===this._remaining&&x(i,this._result)},j.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ae,t,e)},function(e){return n._settledAt(ue,t,e)})},$.all=H,$.race=q,$.resolve=y,$.reject=F,$._setScheduler=i,$._setAsap=r,$._asap=K,$.prototype={constructor:$,then:v,catch:function(e){return this.then(null,e)}},$.polyfill=U,$.Promise=$,$})}).call(t,n(27),n(26),function(){return this}())},function(e,t){"use strict";function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){v&&f&&(v=!1,f.length?p=f.concat(p):y=-1,p.length&&a())}function a(){if(!v){var e=r(s);v=!0;for(var t=p.length;t;){for(f=p,p=[];++y<t;)f&&f[y].run();y=-1,t=p.length}f=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,h,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var f,p=[],v=!1,y=-1;d.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(e){throw Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){},function(e,t,n){(function(t,n){(function(){"use strict";!function(e){function n(e){if("string"!=typeof e&&(e+=""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e+=""),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function u(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function c(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(g.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(g.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=""+e;else if(g.arrayBuffer&&g.blob&&b(e))this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw Error("unsupported BodyInit type");this._bodyArrayBuffer=h(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||t.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");return t.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return E.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function v(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function y(e){var t=new o;return e.split("\r\n").forEach(function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var g={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(g.arrayBuffer)var _=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&_.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,t){e=n(e),t=i(t);var r=this.map[e];this.map[e]=r?r+","+t:t},o.prototype.delete=function(e){delete this.map[n(e)]},o.prototype.get=function(e){return e=n(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},o.prototype.set=function(e,t){this.map[n(e)]=i(t)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},g.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var E=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},d.call(p.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];m.redirect=function(e,t){if(S.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=m,e.fetch=function(e,n){return new t(function(t,i){var r=new p(e,n),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;t(new m(n,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(r.method,r.url,!0),"include"===r.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),r.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:void 0),e.exports=n.fetch}).call(n)}).call(t,n(26),function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={on:function(e,t){this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t)},off:function(e,t){var n=this._eventHandlers&&this._eventHandlers[e];if(n)for(var i=0;i<n.length;i++)n[i]==t&&n.splice(i--,1)},trigger:function(e){if(this._eventHandlers&&this._eventHandlers[e])for(var t=this._eventHandlers[e],n=0;n<t.length;n++)t[n].apply(this,[].slice.call(arguments,1))}};t.default=n},function(e,t){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function e(t,n){r(this,e),this.message=t,this.cause=n,this.name="CustomError",this.stack=n.stack},s=function(e){function t(e,i){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.name="DataReadError",o}return i(t,e),t}(o),a=function(e){function t(e,i){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return o.name="FetchDataError",o}return i(t,e),t}(o);t.DataReadError=s,t.FetchDataError=a},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(33),a=i(s),u=n(42),c=i(u),l=n(44),h=i(l),d=n(45),f=i(d),p=n(51),v=i(p);n(39);var y=n(30),m=i(y),g=function(){function e(){var t=this;r(this,e),this._mainElement=new Hammer(document.body),this._mainElement.get("swipe").set({threshold:0,velocity:.1}),this.currentCity=new a.default(document.querySelector("[data-current-city]")),this.nexDays=new c.default(document.querySelector("[data-addition]")),this.menu=new h.default(document.querySelector("[data-menu]")),this.search=new f.default(document.querySelector("[data-search]")),this.cityViewer=new v.default(document.querySelector("[data-city-viewer]")),this.cityViewer.on(v.default.EVENTS.onDeleteCityGetDimention,function(e){e?t.menu.setOffsetMargin():t.menu.removeOffsetMargin()}),this.cityViewer.on(v.default.EVENTS.isScroll,function(){t.menu.setOffsetMargin()}),this.cityViewer.on(v.default.EVENTS.onAddCity,function(e){e?t.menu.setOffsetMargin():t.menu.removeOffsetMargin()}),this.cityViewer.on(v.default.EVENTS.onShowPreloaderAddCity,function(e){e?t.menu.setOffsetMargin():t.menu.removeOffsetMargin()}),this.cityViewer.on(v.default.EVENTS.onHidePreloaderAddCity,function(e){e?t.menu.setOffsetMargin():t.menu.removeOffsetMargin()}),this.currentCity.on(a.default.EVENTS.onShowMoreDetails,function(e){t.menu.disable()}),this.currentCity.on(a.default.EVENTS.onHideMoreDetails,function(e){t.menu.enable()}),this.currentCity.on(a.default.EVENTS.onChangeHeightByPan,function(e){t.nexDays.setHeight(parseInt(t.nexDays.getHeight())+e+"px")}),this.currentCity.on(a.default.EVENTS.onChangeHeightAfterAnimationPanUp,function(e){t.nexDays.setHeight(e+"px")}),this.currentCity.on(a.default.EVENTS.onChangeHeightAfterAnimationPanDown,function(){t.nexDays.clearHeight()}),window.addEventListener("resize",this._addLandClass.bind(this,document.body)),window.addEventListener("resize",function(n){t.trigger(e.EVENTS.resizeWindow),t.currentCity.addPanClass(),t.currentCity.removeSmallClass(),t._enableDisableMenu(),t.currentCity.isSmallSize()&&!t._isLandscape()?t.nexDays.setHeight(document.documentElement.clientHeight-parseInt(t.currentCity.getHeight())+"px"):t.nexDays.clearHeight(),t.currentCity.details.rebuild(t.currentCity.getFreeSpaceFroDetails())}),this._mainElement.on("swipeleft",function(e){e.target.closest(".menuSwipe")&&t.menu.hide()}),this._mainElement.on("swiperight",function(e){e.target.closest(".menuSwipe")&&t.menu.show()}),this._addLandClass(document.body),this._enableDisableMenu()}return o(e,[{key:"showPreloader",value:function(){document.querySelector(".preloader").classList.add("show")}},{key:"hidePreloader",value:function(){document.querySelector(".preloader").classList.remove("show")}},{key:"showWelcomeScreen",value:function(){document.querySelector(".welcome-screen").classList.add("show")}},{key:"hideWelcomeScreen",value:function(){document.querySelector(".welcome-screen").classList.remove("show")}},{key:"showRefreshing",value:function(){document.querySelector(".city__reload");document.querySelector(".city__reload").classList.add("reloading")}},{key:"hideRefreshing",value:function(){var e=document.querySelector(".city__reload");e.classList.remove("reloading")}},{key:"_enableDisableMenu",value:function(){this._getScreenWidth()<992?this.menu.enable():this.menu.disable()}},{key:"_addLandClass",value:function(e){this._isLandscape()?e.classList.add("isLandscape"):e.classList.remove("isLandscape")}},{key:"_getScreenWidth",value:function(){return document.documentElement.clientWidth}},{key:"_isLandscape",value:function(){return document.documentElement.clientHeight<document.documentElement.clientWidth}},{key:"showMessage",value:function(e){var t=document.querySelector(".popup"),n=t.querySelector(".popup__inner");n.innerHTML=e,t.classList.add("show"),t.addEventListener("click",function e(t){this.classList.remove("show"),this.removeEventListener("click",e)})}}],[{key:"EVENTS",get:function(){return{resizeWindow:"resizeWindow",CurrentCity:a.default.EVENTS,NexDays:c.default.EVENTS,Menu:h.default.EVENTS,Search:f.default.EVENTS,CityViewer:v.default.EVENTS}}}]),e}();t.default=g;for(var _ in m.default)g.prototype[_]=m.default[_]},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(34),a=i(s),u=n(38),c=i(u),l=n(30),h=i(l);n(39);var d=function(){function t(e){var n=this;r(this,t),this._elem=e,this._isSmallClass=!1,this._isMoreDetailsShown=!1,this.details=new a.default,this.hourly=new c.default,this._elem.querySelector("[data-details]").appendChild(this.details.elem),this._elem.querySelector("[data-hourly]").appendChild(this.hourly.elem),this._cityInitHeight=getComputedStyle(this._elem).height,this._elem.addEventListener("click",this._manager.bind(this)),this._elem.addEventListener("transitionend",this._onAnimationEnd.bind(this)),this.setPanDirection(),window.addEventListener("resize",function(e){n.setPanDirection(),n._cityInitHeight=getComputedStyle(n._elem).height}),this._hammertime.on("panup",this._handlePanUp.bind(this)),this._hammertime.on("pandown",this._handlePanDown.bind(this)),this.addPanClass()}return o(t,[{key:"setPanDirection",value:function(){this._isLandscape()?this._hammertime=new Hammer(this._elem,{domEvents:!0}):(this._hammertime||(this._hammertime=new Hammer(this._elem,{domEvents:!0})),this._hammertime.get("pan").set({direction:Hammer.DIRECTION_ALL}))}},{key:"getFreeSpaceFroDetails",value:function(){var e=this._elem.querySelector("[data-details]"),t=this._elem.querySelector("[data-more-details]");return t.getBoundingClientRect().top-e.getBoundingClientRect().top}},{key:"_handlePanUp",value:function(e){if(e.target.closest(".vertical")){var t=getComputedStyle(this._elem).height;if(!(parseInt(t)<=150)){if(parseInt(t)<parseInt(this._cityInitHeight)-10)return this._elem.classList.add("small"),this.details.hide(),this._isSmallClass=!0,this._elem.style.height="150px",void this._hideReloadButton();this._elem.style.height=parseInt(t)-e.distance+"px",this.trigger(this.constructor.EVENTS.onChangeHeightByPan,e.distance)}}}},{key:"_handlePanDown",value:function(e){var t=getComputedStyle(this._elem).height;return parseInt(t)>155?(this._elem.classList.remove("small"),this._isSmallClass=!1,void(this._elem.style.height="")):void(this._elem.style.height=parseInt(t)+e.distance+"px")}},{key:"init",value:function(){this._elem.classList.remove("init")}},{key:"destroy",value:function(){this._elem.classList.add("init")}},{key:"render",value:function(t){var n=this;return new e(function(e,i){n._elem.querySelector("[data-city-img]").src=t.img,n._elem.querySelector("[data-city-data]").innerHTML=t.data,n._elem.querySelector("[data-city-name]").innerHTML=t.name,n._elem.querySelector("[data-city-weather]").innerHTML=t.weather,n._elem.querySelector("[data-city-temp]").innerHTML=t.temp,n._elem.querySelector("[data-city-img]").onload=function(){e()}})}},{key:"isSmallSize",value:function(){return this._elem.classList.contains("small")}},{key:"getHeight",value:function(){return getComputedStyle(this._elem).height}},{key:"_manager",value:function(e){var t=e.target;t.closest("[data-more-details]")&&(e.preventDefault(),this._toggleMoreView(t)),t.closest("[data-current-city-overlay]")&&this._toggleMoreView(this._elem.querySelector("[data-more-details]")),t.closest("[data-reload-data]")&&(e.preventDefault(),this.trigger(this.constructor.EVENTS.onReloadDataRequest,""))}},{key:"_hideReloadButton",value:function(){this._elem.querySelector("[data-reload-data]").style.display="none"}},{key:"_showReloadButton",value:function(){this._elem.querySelector("[data-reload-data]").style.display=""}},{key:"_toggleMoreView",value:function(e){var t=this,n=this;this._elem.classList.contains("show-more-details")?(this._elem.classList.remove("shown"),this.trigger(this.constructor.EVENTS.onHideMoreDetails,""),this._elem.classList.contains("small")&&this.details.hide(),this._elem.addEventListener("transitionend",function t(i){n._elem.classList.remove("show-more-details"),n._elem.removeEventListener("transitionend",t),n.details.hideMore(),n.trigger(n.constructor.EVENTS.onHiddenMoreDetails,""),e.innerHTML="more details",n.details.rebuild(n.getFreeSpaceFroDetails()),n._isMoreDetailsShown=!1})):(this._elem.classList.add("show-more-details"),this._elem.classList.contains("small")?(this.details.show(),this.details.showMore()):this.details.showMore(),e.innerHTML="less details",this.trigger(this.constructor.EVENTS.onShowMoreDetails,""),setTimeout(function(){t._elem.classList.add("shown"),t._isMoreDetailsShown=!0},0))}},{key:"_isLandscape",value:function(){return document.documentElement.clientHeight<document.documentElement.clientWidth}},{key:"addPanClass",value:function(){if(this._isLandscape())this._elem.classList.remove("vertical");else{if(document.documentElement.clientWidth>=768)return;this._elem.classList.add("vertical")}}},{key:"removeSmallClass",value:function(){var e=this;this._isLandscape()?(this.details.show(),this._elem.classList.remove("small")):this._isSmallClass&&(this._elem.style.height="50%",this._isMoreDetailsShown||this.details.hide(),setTimeout(function(){e._elem.style.height="",e._elem.classList.add("small")},0))}},{key:"_onAnimationEnd",value:function(){this._elem.style.height="",this.details.rebuild(this.getFreeSpaceFroDetails()),this.trigger(this.constructor.EVENTS.onAnimationEnd,""),this._isLandscape()?this.trigger(this.constructor.EVENTS.onChangeHeightAfterAnimation,""):this._elem.classList.contains("small")?this.trigger(this.constructor.EVENTS.onChangeHeightAfterAnimationPanUp,document.documentElement.clientHeight-parseInt(getComputedStyle(this._elem).height)):(this._showReloadButton(),this.trigger(this.constructor.EVENTS.onChangeHeightAfterAnimationPanDown),this.details.show())}}],[{key:"EVENTS",get:function(){return{onChangeHeightByPan:"onChangeHeightByPan",onChangeHeightAfterAnimationPanUp:"onChangeHeightAfterAnimationPanUp",onChangeHeightAfterAnimationPanDown:"onChangeHeightAfterAnimationPanDown",onAnimationEnd:"onAnimationEnd",onShowMoreDetails:"onShowMoreDetails",onHideMoreDetails:"onHideMoreDetails",onHiddenMoreDetails:"onHiddenMoreDetails",onReloadDataRequest:"onReloadDataRequest",Hourly:c.default.EVENTS}}}]),t}();t.default=d;for(var f in h.default)d.prototype[f]=h.default[f]}).call(t,n(26))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(35),a=i(s),u=function(){function e(){r(this,e),this._elem=document.createElement("div"),this._elem.className="details"}return o(e,[{key:"getFontSize",value:function(){return getComputedStyle(this._elem).fontSize}},{key:"setFontSize",value:function(e){this._elem.style.fontSize=e}},{key:"getElem",value:function(){return this._elem}},{key:"clearFontSize",value:function(){this._elem.style.fontSize=""}},{key:"hide",value:function(){this._elem.classList.add("hidden")}},{key:"show",value:function(){this._elem.classList.remove("hidden")}},{key:"showMore",value:function(){this._elem.classList.add("open")}},{key:"hideMore",value:function(){this._elem.classList.remove("open")}},{key:"render",value:function(e,t){var n=this._getItemInListHeight(),i=parseInt(t/n)>=2?parseInt(t/n):1;i=i>3?3:i,this._elem.innerHTML=(0,a.default)({items:e,freeSpace:i})}},{key:"rebuild",value:function(e){var t=this._elem.querySelectorAll(".details__item "),n=this._getItemInListHeight(),i=parseInt(e/n)>=2?parseInt(e/n):1;i=i>3?3:i;var r=!0,o=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;c.classList.remove("details--more")}}catch(e){o=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}for(var l=0;l<t.length;l++)l>=i&&t[l].classList.add("details--more")}},{key:"_getItemInListHeight",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.left="-99999px";var t=document.createElement("div");t.className="details__item",t.innerHTML="fake",e.appendChild(t),document.body.appendChild(e);var n=e.children[0].clientHeight;return document.body.removeChild(e),n}},{key:"elem",get:function(){return this._elem}}]),e}();t.default=u},function(e,t,n){function i(e){var t,n="",i=e||{};return function(e,i){(function(){var o=i;if("number"==typeof o.length)for(var s=0,a=o.length;s<a;s++){var u=o[s];n=n+"\n<div"+r.attr("class",r.classes(["details__item "+(s>=e?"details--more":"")],[!0]),!1,!0)+'><span class="details__item-text">'+r.escape(null==(t=u[0])?"":t)+'</span><span class="details__num">'+r.escape(null==(t=u[1])?"":t)+"<span>"+r.escape(null==(t=u[2]||"")?"":t)+"</span></span></div>"}else{var a=0;for(var s in o){a++;var u=o[s];n=n+"\n<div"+r.attr("class",r.classes(["details__item "+(s>=e?"details--more":"")],[!0]),!1,!0)+'><span class="details__item-text">'+r.escape(null==(t=u[0])?"":t)+'</span><span class="details__num">'+r.escape(null==(t=u[1])?"":t)+"<span>"+r.escape(null==(t=u[2]||"")?"":t)+"</span></span></div>"}}}).call(this)}.call(this,"freeSpace"in i?i.freeSpace:"undefined"!=typeof freeSpace?freeSpace:void 0,"items"in i?i.items:"undefined"!=typeof items?items:void 0),n}var r=n(36);e.exports=i},function(e,t,n){"use strict";function i(e,t){if(1===arguments.length){for(var n=e[0],r=1;r<e.length;r++)n=i(n,e[r]);return n}for(var o in t)if("class"===o){var s=e[o]||[];e[o]=(Array.isArray(s)?s:[s]).concat(t[o]||[])}else if("style"===o){var s=a(e[o]),u=a(t[o]);e[o]=s+(s&&u&&";")+u}else e[o]=t[o];return e}function r(e,t){for(var n,i="",r="",o=Array.isArray(t),a=0;a<e.length;a++)n=s(e[a]),n&&(o&&t[a]&&(n=l(n)),i=i+r+n,r=" ");return i}function o(e){var t="",n="";for(var i in e)i&&e[i]&&d.call(e,i)&&(t=t+n+i,n=" ");return t}function s(e,t){return Array.isArray(e)?r(e,t):e&&"object"==typeof e?o(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="",n="";for(var i in e)d.call(e,i)&&(t=t+n+i+":"+e[i],n=";");return t}return e=""+e,";"===e[e.length-1]?e.slice(0,-1):e}function u(e,t,n,i){return t!==!1&&null!=t&&(t||"class"!==e&&"style"!==e)?t===!0?" "+(i?e:e+'="'+e+'"'):("function"==typeof t.toJSON&&(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||t.indexOf('"')===-1)?(n&&(t=l(t)),
" "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"):""}function c(e,t){var n="";for(var i in e)if(d.call(e,i)){var r=e[i];if("class"===i){r=s(r),n=u(i,r,!1,t)+n;continue}"style"===i&&(r=a(r)),n+=u(i,r,!1,t)}return n}function l(e){var t=""+e,n=f.exec(t);if(!n)return e;var i,r,o,s="";for(i=n.index,r=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}r!==i&&(s+=t.substring(r,i)),r=i+1,s+=o}return r!==i?s+t.substring(r,i):s}function h(e,t,i,r){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||r))throw e.message+=" on line "+i,e;try{r=r||n(37).readFileSync(t,"utf8")}catch(t){h(e,null,i)}var o=3,s=r.split("\n"),a=Math.max(i-o,0),u=Math.min(s.length,i+o),o=s.slice(a,u).map(function(e,t){var n=t+a+1;return(n==i?"  > ":"    ")+n+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Pug")+":"+i+"\n"+o+"\n\n"+e.message,e}var d=Object.prototype.hasOwnProperty;t.merge=i,t.classes=s,t.style=a,t.attr=u,t.attrs=c;var f=/["&<>]/;t.escape=l,t.rethrow=h},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(39);var s=n(40),a=i(s),u=n(41),c=i(u),l=n(30),h=i(l),d=function(){function e(t){var n=this;r(this,e),this._elem=document.createElement("div"),this._elem.className="hourly",this.isRendered=!1,this._swipeElem=new Hammer(this._elem,{domEvents:!0}),this._swipeElem.on("swipeleft",function(e){n._getLengthOfItems()<5||(n._slider.classList.add("slide"),n.trigger(n.constructor.EVENTS.onSwipeLeft,""))}),this._swipeElem.on("swiperight",function(e){n._getLengthOfItems()<5||(n._slider.classList.remove("slide"),n.trigger(n.constructor.EVENTS.onSwipeRight,""))}),this._swipeElem.on("swipe",function(e){n.trigger(n.constructor.EVENTS.onSwipe,"")})}return o(e,[{key:"_getLengthOfItems",value:function(){return this._elem.querySelectorAll(".hourly__slide").length}},{key:"render",value:function(e){var t=this;this._elem.innerHTML=(0,a.default)({slides:e}),this._slider=this._elem.querySelector("[data-hourly-slider]"),this._inner=this._elem.querySelector("[data-hourly-inner]"),this.trigger(this.constructor.EVENTS.onRender,""),setTimeout(function(){t._elem.classList.add("shown"),setTimeout(function(){t._elem.classList.add("shown-slider"),t.isRendered=!0},50)},0)}},{key:"refresh",value:function(e){if(this.isRendered)for(var t=this._elem.querySelectorAll(".hourly__slide"),n=0;n<e.length;n++)t[n].querySelector(".hourly__slide-time").innerHTML=e[n].time,t[n].querySelector(".hourly__slide-temp").innerHTML=e[n].temp}},{key:"renderNA",value:function(){var e=this;this._elem.innerHTML=(0,c.default)(),this.trigger(this.constructor.EVENTS.onRender,""),setTimeout(function(){e._elem.classList.add("shown"),setTimeout(function(){e._elem.classList.add("shown-slider")},50)},0)}},{key:"destroy",value:function(){this.elem.innerHTML="",this._elem.classList.remove("shown"),this._elem.classList.remove("shown-slider"),this.trigger(this.constructor.EVENTS.onDestroy,""),this.isRendered=!1}},{key:"elem",get:function(){return this._elem}}],[{key:"EVENTS",get:function(){return{onRender:"onRender",onDestroy:"onDestroy",onSwipe:"onSwipe",onSwipeLeft:"onSwipeLeft",onSwipeRight:"onSwipeRight",onTransitionEnd:"onTransitionEnd",onDestroyTransitionEnd:"onDestroyTransitionEnd"}}}]),e}();t.default=d;for(var f in h.default)d.prototype[f]=h.default[f]},function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! Hammer.JS - v2.0.8 - 2016-04-23
	 * http://hammerjs.github.io/
	 *
	 * Copyright (c) 2016 Jorik Tangelder;
	 * Licensed under the MIT license */
!function(o,s,a,u){"use strict";function c(e,t,n){return setTimeout(p(e,n),t)}function l(e,t,n){return!!Array.isArray(e)&&(h(e,n[t],n),!0)}function h(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==u)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function d(e,t,n){var i="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),e.apply(this,arguments)}}function f(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&ye(i,n)}function p(e,t){return function(){return e.apply(t,arguments)}}function v(e,t){return(void 0===e?"undefined":r(e))==_e?e.apply(t?t[0]||u:u,t):e}function y(e,t){return e===u?t:e}function m(e,t,n){h(w(t),function(t){e.addEventListener(t,n,!1)})}function g(e,t,n){h(w(t),function(t){e.removeEventListener(t,n,!1)})}function _(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function E(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function S(e){return Array.prototype.slice.call(e,0)}function T(e,t,n){for(var i=[],r=[],o=0;o<e.length;){var s=t?e[o][t]:e[o];E(r,s)<0&&i.push(e[o]),r[o]=s,o++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function C(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<me.length;){if(n=me[o],i=n?n+r:t,i in e)return i;o++}return u}function k(){return Ce++}function x(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}function D(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){v(e.options.enable,[e])&&n.handler(t)},this.init()}function A(e){var t,n=e.options.inputClass;return new(t=n?n:De?B:Ae?W:xe?X:z)(e,L)}function L(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&Pe&&i-r===0,s=t&(je|Re)&&i-r===0;n.isFirst=!!o,n.isFinal=!!s,o&&(e.session={}),n.eventType=t,O(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function O(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=N(t)),r>1&&!n.firstMultiple?n.firstMultiple=N(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,a=s?s.center:o.center,u=t.center=P(i);t.timeStamp=Ee(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=H(a,u),t.distance=R(a,u),M(n,t),t.offsetDirection=j(t.deltaX,t.deltaY);var c=V(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=we(c.x)>we(c.y)?c.x:c.y,t.scale=s?F(s.pointers,i):1,t.rotation=s?q(s.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,I(n,t);var l=e.element;_(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function M(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==Pe&&o.eventType!==je||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function I(e,t){var n,i,r,o,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(t.eventType!=Re&&(a>Ne||s.velocity===u)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,h=V(a,c,l);i=h.x,r=h.y,n=we(h.x)>we(h.y)?h.x:h.y,o=j(c,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}function N(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:be(e.pointers[n].clientX),clientY:be(e.pointers[n].clientY)},n++;return{timeStamp:Ee(),pointers:t,center:P(t),deltaX:e.deltaX,deltaY:e.deltaY}}function P(e){var t=e.length;if(1===t)return{x:be(e[0].clientX),y:be(e[0].clientY)};for(var n=0,i=0,r=0;t>r;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:be(n/t),y:be(i/t)}}function V(e,t,n){return{x:t/e||0,y:n/e||0}}function j(e,t){return e===t?He:we(e)>=we(t)?0>e?qe:Fe:0>t?ze:Be}function R(e,t,n){n||(n=Ye);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function H(e,t,n){n||(n=Ye);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function q(e,t){return H(t[1],t[0],Xe)+H(e[1],e[0],Xe)}function F(e,t){return R(t[0],t[1],Xe)/R(e[0],e[1],Xe)}function z(){this.evEl=Je,this.evWin=Ke,this.pressed=!1,D.apply(this,arguments)}function B(){this.evEl=et,this.evWin=tt,D.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function $(){this.evTarget=it,this.evWin=rt,this.started=!1,D.apply(this,arguments)}function U(e,t){var n=S(e.touches),i=S(e.changedTouches);return t&(je|Re)&&(n=T(n.concat(i),"identifier",!0)),[n,i]}function W(){this.evTarget=st,this.targetIds={},D.apply(this,arguments)}function Y(e,t){var n=S(e.touches),i=this.targetIds;if(t&(Pe|Ve)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=S(e.changedTouches),a=[],u=this.target;if(o=n.filter(function(e){return _(e.target,u)}),t===Pe)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),t&(je|Re)&&delete i[s[r].identifier],r++;return a.length?[T(o.concat(a),"identifier",!0),a]:void 0}function X(){D.apply(this,arguments);var e=p(this.handler,this);this.touch=new W(this.manager,e),this.mouse=new z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function G(e,t){e&Pe?(this.primaryTouch=t.changedPointers[0].identifier,J.call(this,t)):e&(je|Re)&&J.call(this,t)}function J(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,at)}}function K(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),s=Math.abs(n-r.y);if(ut>=o&&ut>=s)return!0}return!1}function Z(e,t){this.manager=e,this.set(t)}function Q(e){if(b(e,pt))return pt;var t=b(e,vt),n=b(e,yt);return t&&n?pt:t||n?t?vt:yt:b(e,ft)?ft:dt}function ee(){if(!lt)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||o.CSS.supports("touch-action",n)}),e}function te(e){this.options=ye({},this.defaults,e||{}),this.id=k(),this.manager=null,this.options.enable=y(this.options.enable,!0),this.state=gt,this.simultaneous={},this.requireFail=[]}function ne(e){return e&St?"cancel":e&wt?"end":e&bt?"move":e&_t?"start":""}function ie(e){return e==Be?"down":e==ze?"up":e==qe?"left":e==Fe?"right":""}function re(e,t){var n=t.manager;return n?n.get(e):e}function oe(){te.apply(this,arguments)}function se(){oe.apply(this,arguments),this.pX=null,this.pY=null}function ae(){oe.apply(this,arguments)}function ue(){te.apply(this,arguments),this._timer=null,this._input=null}function ce(){oe.apply(this,arguments)}function le(){oe.apply(this,arguments)}function he(){te.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function de(e,t){return t=t||{},t.recognizers=y(t.recognizers,de.defaults.preset),new fe(e,t)}function fe(e,t){this.options=ye({},de.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=A(this),this.touchAction=new Z(this,this.options.touchAction),pe(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function pe(e,t){var n=e.element;if(n.style){var i;h(e.options.cssProps,function(r,o){i=C(n.style,o),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function ve(e,t){var n=s.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var ye,me=["","webkit","Moz","MS","ms","o"],ge=s.createElement("div"),_e="function",be=Math.round,we=Math.abs,Ee=Date.now;ye="function"!=typeof Object.assign?function(e){if(e===u||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==u&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var Se=d(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===u)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),Te=d(function(e,t){return Se(e,t,!0)},"merge","Use `assign`."),Ce=1,ke=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in o,De=C(o,"PointerEvent")!==u,Ae=xe&&ke.test(navigator.userAgent),Le="touch",Oe="pen",Me="mouse",Ie="kinect",Ne=25,Pe=1,Ve=2,je=4,Re=8,He=1,qe=2,Fe=4,ze=8,Be=16,$e=qe|Fe,Ue=ze|Be,We=$e|Ue,Ye=["x","y"],Xe=["clientX","clientY"];D.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(x(this.element),this.evWin,this.domHandler)}};var Ge={mousedown:Pe,mousemove:Ve,mouseup:je},Je="mousedown",Ke="mousemove mouseup";f(z,D,{handler:function(e){var t=Ge[e.type];t&Pe&&0===e.button&&(this.pressed=!0),t&Ve&&1!==e.which&&(t=je),this.pressed&&(t&je&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Me,srcEvent:e}))}});var Ze={pointerdown:Pe,pointermove:Ve,pointerup:je,pointercancel:Re,pointerout:Re},Qe={2:Le,3:Oe,4:Me,5:Ie},et="pointerdown",tt="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(et="MSPointerDown",tt="MSPointerMove MSPointerUp MSPointerCancel"),f(B,D,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=Ze[i],o=Qe[e.pointerType]||e.pointerType,s=o==Le,a=E(t,e.pointerId,"pointerId");r&Pe&&(0===e.button||s)?0>a&&(t.push(e),a=t.length-1):r&(je|Re)&&(n=!0),0>a||(t[a]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(a,1))}});var nt={touchstart:Pe,touchmove:Ve,touchend:je,touchcancel:Re},it="touchstart",rt="touchstart touchmove touchend touchcancel";f($,D,{handler:function(e){var t=nt[e.type];if(t===Pe&&(this.started=!0),this.started){var n=U.call(this,e,t);t&(je|Re)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Le,srcEvent:e})}}});var ot={touchstart:Pe,touchmove:Ve,touchend:je,touchcancel:Re},st="touchstart touchmove touchend touchcancel";f(W,D,{handler:function(e){var t=ot[e.type],n=Y.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Le,srcEvent:e})}});var at=2500,ut=25;f(X,D,{handler:function(e,t,n){var i=n.pointerType==Le,r=n.pointerType==Me;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)G.call(this,t,n);else if(r&&K.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ct=C(ge.style,"touchAction"),lt=ct!==u,ht="compute",dt="auto",ft="manipulation",pt="none",vt="pan-x",yt="pan-y",mt=ee();Z.prototype={set:function(e){e==ht&&(e=this.compute()),lt&&this.manager.element.style&&mt[e]&&(this.manager.element.style[ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){v(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=b(i,pt)&&!mt[pt],o=b(i,yt)&&!mt[yt],s=b(i,vt)&&!mt[vt];if(r){var a=1===e.pointers.length,u=e.distance<2,c=e.deltaTime<250;if(a&&u&&c)return}return s&&o?void 0:r||o&&n&$e||s&&n&Ue?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var gt=1,_t=2,bt=4,wt=8,Et=wt,St=16,Tt=32;te.prototype={defaults:{},set:function(e){return ye(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(l(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=re(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return l(e,"dropRecognizeWith",this)?this:(e=re(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(l(e,"requireFailure",this))return this;var t=this.requireFail;return e=re(e,this),-1===E(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(l(e,"dropRequireFailure",this))return this;e=re(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;wt>i&&t(n.options.event+ne(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=wt&&t(n.options.event+ne(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=Tt)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Tt|gt)))return!1;e++}return!0},recognize:function(e){var t=ye({},e);return v(this.options.enable,[this,t])?(this.state&(Et|St|Tt)&&(this.state=gt),this.state=this.process(t),void(this.state&(_t|bt|wt|St)&&this.tryEmit(t))):(this.reset(),void(this.state=Tt))},process:function(e){},getTouchAction:function(){},reset:function(){}},f(oe,te,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(_t|bt),r=this.attrTest(e);return i&&(n&Re||!r)?t|St:i||r?n&je?t|wt:t&_t?t|bt:_t:Tt}}),f(se,oe,{defaults:{event:"pan",threshold:10,pointers:1,direction:We},getTouchAction:function(){var e=this.options.direction,t=[];return e&$e&&t.push(yt),e&Ue&&t.push(vt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&$e?(r=0===o?He:0>o?qe:Fe,n=o!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?He:0>s?ze:Be,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return oe.prototype.attrTest.call(this,e)&&(this.state&_t||!(this.state&_t)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ie(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(ae,oe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&_t)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(ue,te,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[dt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(je|Re)&&!r)this.reset();else if(e.eventType&Pe)this.reset(),this._timer=c(function(){this.state=Et,this.tryEmit()},t.time,this);else if(e.eventType&je)return Et;return Tt},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===Et&&(e&&e.eventType&je?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=Ee(),this.manager.emit(this.options.event,this._input)))}}),f(ce,oe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[pt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&_t)}}),f(le,oe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:$e|Ue,pointers:1},getTouchAction:function(){return se.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&($e|Ue)?t=e.overallVelocity:n&$e?t=e.overallVelocityX:n&Ue&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&we(t)>this.options.velocity&&e.eventType&je},emit:function(e){var t=ie(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(he,te,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&Pe&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=je)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||R(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;var a=this.count%t.taps;if(0===a)return this.hasRequireFailures()?(this._timer=c(function(){this.state=Et,this.tryEmit()},t.interval,this),_t):Et}return Tt},failTimeout:function(){return this._timer=c(function(){this.state=Tt},this.options.interval,this),Tt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Et&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),de.VERSION="2.0.8",de.defaults={domEvents:!1,touchAction:ht,enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[ae,{enable:!1},["rotate"]],[le,{direction:$e}],[se,{direction:$e},["swipe"]],[he],[he,{event:"doubletap",taps:2},["tap"]],[ue]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ct=1,kt=2;fe.prototype={set:function(e){return ye(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?kt:Ct},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&Et)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],t.stopped===kt||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(_t|bt|wt)&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof te)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(l(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(l(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=E(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==u&&t!==u){var n=this.handlers;return h(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==u){var n=this.handlers;return h(w(e),function(e){t?n[e]&&n[e].splice(E(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ve(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ye(de,{INPUT_START:Pe,INPUT_MOVE:Ve,INPUT_END:je,INPUT_CANCEL:Re,STATE_POSSIBLE:gt,STATE_BEGAN:_t,STATE_CHANGED:bt,STATE_ENDED:wt,STATE_RECOGNIZED:Et,STATE_CANCELLED:St,STATE_FAILED:Tt,DIRECTION_NONE:He,DIRECTION_LEFT:qe,DIRECTION_RIGHT:Fe,DIRECTION_UP:ze,DIRECTION_DOWN:Be,DIRECTION_HORIZONTAL:$e,DIRECTION_VERTICAL:Ue,DIRECTION_ALL:We,Manager:fe,Input:D,TouchAction:Z,TouchInput:W,MouseInput:z,PointerEventInput:B,TouchMouseInput:X,SingleTouchInput:$,Recognizer:te,AttrRecognizer:oe,Tap:he,Pan:se,Swipe:le,Pinch:ae,Rotate:ce,Press:ue,on:m,off:g,each:h,merge:Te,extend:Se,assign:ye,inherit:f,bindFn:p,prefixed:C});var xt=void 0!==o?o:"undefined"!=typeof self?self:{};xt.Hammer=de,i=function(){return de}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(window,document,"Hammer")},function(e,t,n){function i(e){var t,n="",i=e||{};return function(e){n+='\n<div class="hourly__inner" data-hourly-inner>\n  <div class="hourly__slider" data-hourly-slider>',function(){var i=e;if("number"==typeof i.length)for(var o=0,s=i.length;o<s;o++){var a=i[o];n=n+'\n    <div class="hourly__slide">\n      <div class="hourly__slide-time">'+r.escape(null==(t=a.time)?"":t)+'</div>\n      <div class="hourly__slide-temp celcius">'+r.escape(null==(t=a.temp)?"":t)+"</div>\n    </div>"}else{var s=0;for(var o in i){s++;var a=i[o];n=n+'\n    <div class="hourly__slide">\n      <div class="hourly__slide-time">'+r.escape(null==(t=a.time)?"":t)+'</div>\n      <div class="hourly__slide-temp celcius">'+r.escape(null==(t=a.temp)?"":t)+"</div>\n    </div>"}}}.call(this),n+="\n  </div>\n</div>"}.call(this,"slides"in i?i.slides:"undefined"!=typeof slides?slides:void 0),n}var r=n(36);e.exports=i},function(e,t,n){function i(e){var t="";return t+='\n<div class="hourly__inner" data-hourly-inner>\n  <div class="hourly__na">\n    <div class="hourly__na-inner">N/A</div>\n  </div>\n</div>'}n(36);e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(43),a=i(s),u=function(){function e(t){r(this,e),this._elem=t}return o(e,[{key:"getHeight",value:function(){return getComputedStyle(this._elem).height}},{key:"setHeight",value:function(e){this._elem.style.height=e}},{key:"clearHeight",value:function(){this._elem.style.height=""}},{key:"render",value:function(e){this._elem.innerHTML=(0,a.default)({items:e})}},{key:"destroy",value:function(){this._elem.innerHTML=""}}]),e}();t.default=u},function(e,t,n){function i(e){var t,n="",i=e||{};return function(e){n+='\n<ul class="addition__list">',function(){var i=e;if("number"==typeof i.length)for(var o=0,s=i.length;o<s;o++){var a=i[o];n=n+'\n  <li class="addition__item">\n    <div class="nex-day" data-next-day>\n      <div class="nex-day__img-wrapper"><img class="nex-day__img"'+r.attr("src",a.img,!0,!0)+'></div>\n      <div class="nex-day__desc">\n        <div class="nex-day__date">'+r.escape(null==(t=a.data)?"":t)+'</div>\n        <div class="nex-day__weather">'+r.escape(null==(t=a.main)?"":t)+'</div>\n      </div>\n      <div class="nex-day__temp">\n        <div class="nex-day__temp-day celcius">'+r.escape(null==(t=a.temp.day)?"":t)+"</div>\n      </div>\n    </div>\n  </li>"}else{var s=0;for(var o in i){s++;var a=i[o];n=n+'\n  <li class="addition__item">\n    <div class="nex-day" data-next-day>\n      <div class="nex-day__img-wrapper"><img class="nex-day__img"'+r.attr("src",a.img,!0,!0)+'></div>\n      <div class="nex-day__desc">\n        <div class="nex-day__date">'+r.escape(null==(t=a.data)?"":t)+'</div>\n        <div class="nex-day__weather">'+r.escape(null==(t=a.main)?"":t)+'</div>\n      </div>\n      <div class="nex-day__temp">\n        <div class="nex-day__temp-day celcius">'+r.escape(null==(t=a.temp.day)?"":t)+"</div>\n      </div>\n    </div>\n  </li>"}}}.call(this),n+="\n</ul>"}.call(this,"items"in i?i.items:"undefined"!=typeof items?items:void 0),n}var r=n(36);e.exports=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this._elem=t,t.addEventListener("click",this._manager.bind(this))}return i(e,[{key:"setOffsetMargin",value:function(){this._elem.querySelector(".menu__city-viewer").style.marginRight=-this._getScrollWidth()+"px"}},{key:"removeOffsetMargin",value:function(){this._elem.querySelector(".menu__city-viewer").style.marginRight=""}},{key:"_manager",value:function(e){e.target.closest(".menu__close")&&this.hide(),e.target.closest(".menu__overflow")&&this.hide()}},{key:"show",value:function(){this._elem.classList.add("open")}},{key:"hide",value:function(){this._elem.classList.remove("open")}},{key:"enable",value:function(){document.body.classList.add("menuSwipe")}},{key:"disable",value:function(){document.body.classList.remove("menuSwipe")}},{key:"setStateIsEmpty",value:function(){this._elem.classList.add("is-empty")}},{key:"removeStateIsEmpty",value:function(){this._elem.classList.remove("is-empty")}},{key:"_getScrollWidth",value:function(){var e=document.createElement("div");e.style.overflow="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}}]),e}();t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(46),a=i(s);n(47);var u=n(30),c=i(u),l=function(){function e(t){var n=this;r(this,e),this._elem=t;var i=t.querySelector("."+t.className+"__input");a.default.init(i).on("change",function(e){n._sendCityData(e)})}return o(e,[{key:"_sendCityData",value:function(e){this.trigger(this.constructor.EVENTS.onGetCity,e)}},{key:"disable",value:function(){this._elem.classList.add("block")}},{key:"enable",value:function(){this._elem.classList.remove("block")}}],[{key:"EVENTS",get:function(){return{onGetCity:"onGetCity"}}}]),e}();for(var h in c.default)l.prototype[h]=c.default[h];t.default=l},function(e,t,n){var i,r,o,s,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*! teleport-autocomplete - v0.3.1 | https://github.com/teleport/autocomplete#readme | MIT */
!function(n){if("object"==a(t)&&void 0!==e)e.exports=n();else{r=[],i=n,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}}(function(){return function e(t,n,i){function r(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof s&&s;if(!u&&c)return s(a,!0);if(o)return o(a,!0);var l=Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){var n=t[a][1][e];return r(n?n:e)},h,h.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof s&&s,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();e("classlist-polyfill"),e("element-closest");var s=e("halfred"),a=i(s),u=e("minivents"),c=i(u),l=e("core-js/library/fn/object/assign"),h=i(l),d=e("core-js/library/fn/array/find"),f=i(d),p=e("core-js/library/fn/regexp/escape"),v=i(p),y=e("debounce"),m=i(y),g={BACK:8,TAB:9,ENTER:13,UP:38,DOWN:40},_='<div class="tp-autocomplete"><ul class="tp-ac__list"></ul></div>',b="tp-ac__input",w=function(e){return'<li class="tp-ac__item">'+e+"</li>"},E='<li class="tp-ac__item no-results">No matches</li>',S='<li class="tp-ac__item geolocate">Detect my current location</li>',T=function(e){return this.wrapMatches(e.title)};HTMLElement.prototype.on=HTMLElement.prototype.addEventListener,HTMLElement.prototype.off=HTMLElement.prototype.removeEventListener;var C=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.el,o=void 0===i?null:i,s=n.value,a=n.maxItems,u=void 0===a?10:a,l=n.itemTemplate,d=void 0===l?T:l,f=n.geoLocate,p=void 0===f||f,v=n.apiRoot,y=void 0===v?"https://api.teleport.org/api":v,g=n.apiVersion,_=void 0===g?1:g,b=n.embeds,w=void 0===b?"city:country,city:admin1_division,city:timezone/tz:offsets-now,city:urban_area":b;r(this,e),(0,c.default)(this);var E="string"==typeof o?document.querySelector(o):o;return this.setupInput(E),(0,h.default)(this,{maxItems:u,geoLocate:p,apiRoot:y,apiVersion:_,itemTemplate:d,embeds:w,results:[],_activeIndex:0,_cache:{},_query:this.el.value,value:s}),this.value&&this.value.title?this.query=this.value.title:this.query&&this.fetchResults(function(){t.value=t.getResultByTitle(t.query),t.emit("change",t.value)}),this.getCities=(0,m.default)(this.getCities,200),this}return o(e,[{key:"query",get:function(){return this._query},set:function(e){return e===this._query?e:(this._query=e,this.el.value=e,void this.emit("querychange",e))}},{key:"activeIndex",get:function(){return this._activeIndex},set:function(e){var t=this.list.childNodes[this._activeIndex];t&&t.classList.remove("is-active"),this._activeIndex=e;var n=this.list.childNodes[e];n&&n.classList.add("is-active")}},{key:"loading",set:function(e){this.container.classList.toggle("spinner",e)}}]),o(e,[{key:"destroy",value:function(){this.el.off("input",this.oninput),this.el.off("keydown",this.onkeydown),this.el.off("focus",this.onfocus),this.el.off("blur",this.onblur),this.el.off("click",this.onclick),this.el.classList.remove(b);var e=this.container.parentNode;e.replaceChild(this.el.parentNode.removeChild(this.el),this.container)}},{key:"clear",value:function(){this.results=[],this.selectByIndex(0)}},{key:"setupInput",value:function(e){if(!(e&&e instanceof HTMLInputElement))throw Error("Invalid element given");e.insertAdjacentHTML("beforebegin",_),Object.defineProperty(this,"container",{value:e.previousSibling}),Object.defineProperty(this,"list",{value:this.container.firstChild});var t=this.container.insertBefore(e.parentNode.removeChild(e),this.list);t.classList.add(b),Object.defineProperty(this,"el",{enumerable:!0,value:t}),this.el.on("input",this.oninput.bind(this)),this.el.on("keydown",this.onkeydown.bind(this)),this.el.on("focus",this.onfocus.bind(this)),this.el.on("blur",this.onblur.bind(this)),this.el.on("click",this.onclick.bind(this)),this.list.on("mousedown",this.onlistclick.bind(this))}},{key:"onlistclick",value:function(e){var t=[].indexOf.call(this.list.children,e.target.closest(".tp-ac__item"));this.selectByIndex(t)}},{key:"onclick",value:function(){this.el.select()}},{key:"onfocus",value:function(){this.renderList()}},{key:"onblur",value:function(){this.list.innerHTML=""}},{key:"oninput",value:function(){var e=this;this._query=this.el.value,this.fetchResults(function(){return e.renderList()})}},{key:"onkeydown",value:function(e){var t=e.keyCode;switch(-1!==[g.UP,g.DOWN].indexOf(t)&&e.preventDefault(),t){case g.BACK:(this.value||1===this.query.length)&&this.clear();break;case g.ENTER:!this.value&&this.query&&e.preventDefault(),this.selectByIndex(this.activeIndex);break;case g.TAB:this.value||this.selectByIndex(this.activeIndex);break;case g.UP:this.activeIndex=Math.max(0,this.activeIndex-1);break;case g.DOWN:this.activeIndex=Math.min(this.results.length-1,this.activeIndex+1)}}},{key:"selectByIndex",value:function(e){this.activeIndex=e;var t=this.value;this.value=this.results[e]||null;var n=this.list.firstChild&&this.list.firstChild.classList.contains("geolocate");n&&this.currentLocation(),t===this.value||n||this.emit("change",this.value),this.list.innerHTML="",this.query=this.value?this.value.title:""}},{key:"wrapMatches",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=e;return this.query.split(/[\,\s]+/).filter(function(e){return!!e}).forEach(function(e){var n=RegExp((0,v.default)(e)+"(?![^<]*>|[^<>]*</)","gi");t=t.replace(n,"<span>$&</span>")}),t}},{key:"renderList",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.geoLocate,i=void 0===n?this.geoLocate:n,r=this.results.map(function(t){return w(e.itemTemplate(t))}).slice(0,this.maxItems).join("");r||""===this.query||this.value||(r=E),""===this.query&&i&&(r=S),this.list.innerHTML=r,this.activeIndex=0}},{key:"getResultByTitle",value:function(e){return this.results&&e?(0,f.default)(this.results,function(t){return-1!==t.title.indexOf(e)}):null}},{key:"fetchResults",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];this.req&&this.req.abort();var n=this._cache[this.query];return n?(this.results=n,t()):(this.req=this.getCities(function(n){e.results=e._cache[e.query]=n,t(),e.loading=!1}),void(this.loading=!0))}},{key:"currentLocation",value:function(){var e=this,t=new XMLHttpRequest,n="location:nearest-cities/location:nearest-city/"+(this.embeds?"{"+this.embeds+"}":"");this.loading=!0,this.oldPlaceholder=this.el.placeholder,this.el.placeholder="Detecting location...",navigator.geolocation.getCurrentPosition(function(i){var r=i.coords;t.open("GET",e.apiRoot+"/locations/"+r.latitude+","+r.longitude+"/?embed="+n),t.setRequestHeader("Accept","application/vnd.teleport.v"+e.apiVersion+"+json"),t.addEventListener("load",function(){return e.parseLocation(JSON.parse(t.response))}),t.send()},function(t){var n=t.message;e.loading=!1,e.el.placeholder=n,setTimeout(function(){return e.el.placeholder=e.oldPlaceholder},3e3)},{timeout:5e3})}},{key:"parseLocation",value:function(e){var t=a.default.parse(e),n=t.embeddedArray("location:nearest-cities")[0];n&&(this.results=[this.parseCity(n)],"nopick"===this.geoLocate?(this.el.focus(),this.renderList({geoLocate:!1})):this.selectByIndex(0)),this.loading=!1,this.el.placeholder=this.oldPlaceholder}},{key:"getCities",value:function(e){var t=this;if(!this.query)return e([]);var n="city:search-results/city:item/"+(this.embeds?"{"+this.embeds+"}":""),i=new XMLHttpRequest;return i.open("GET",this.apiRoot+"/cities/?search="+this.query+"&embed="+n+"&limit="+this.maxItems),i.setRequestHeader("Accept","application/vnd.teleport.v"+this.apiVersion+"+json"),i.addEventListener("load",function(){var n=a.default.parse(JSON.parse(i.response)).embeddedArray("city:search-results").map(function(e){return t.parseCity(e)});e(n)}),i.send(),i}},{key:"parseCity",value:function(e){var t=e.embedded("location:nearest-city")||e.embedded("city:item");t.country=t.embedded("city:country"),t.admin1_division=t.embedded("city:admin1_division"),t.timezone=t.embedded("city:timezone"),t.urban_area=t.embedded("city:urban_area");var n=t.full_name,i=t.name,r=t.geoname_id,o=t.population,s=t.location.latlon,a=s.latitude,u=s.longitude,c=e.matching_full_name,l=void 0===c?n:c,d={title:l,name:i,geonameId:r,latitude:a,longitude:u,population:o};if(t.country&&(0,h.default)(d,{country:t.country.name}),t.admin1_division){var f=t.admin1_division,p=f.name,v=f.geonames_admin1_code;(0,h.default)(d,{admin1Division:p,admin1DivisionCode:v})}if(t.timezone){var y=t.timezone.embedded("tz:offsets-now");(0,h.default)(d,{tzOffsetMinutes:y.total_offset_min})}if(t.urban_area){var m=t.urban_area,g=m.slug,_=m.name,b=m.ua_id,w=m.teleport_city_url;(0,h.default)(d,{uaName:_,uaId:b,uaCityUrl:w,uaSlug:g})}return d}}],[{key:"init",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i="string"==typeof t||t instanceof HTMLInputElement?(0,h.default)(n,{el:t}):t;return new e(i)}}]),e}();n.default=C,t.exports=n.default},{"classlist-polyfill":2,"core-js/library/fn/array/find":3,"core-js/library/fn/object/assign":4,"core-js/library/fn/regexp/escape":5,debounce:33,"element-closest":34,halfred:35,minivents:39}],2:[function(e,t,n){"document"in window.self&&("classList"in document.createElement("_")?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function e(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},u=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",""+this)}},l=c[n]=[],h=function(){return new c(this)};if(a[n]=Error[n],l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==u(this,e)},l.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",-1===u(this,e)&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},l.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=u(this,e);-1!==t;)this.splice(t,1),o=!0,t=u(this,e);while(++i<r);o&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},l.toString=function(){return this.join(" ")},r.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,d)}catch(e){-2146823252===e.number&&(d.enumerable=!1,r.defineProperty(i,t,d))}}else r[n].__defineGetter__&&i.__defineGetter__(t,h)}}(window.self))},{}],3:[function(e,t,n){e("../../modules/es6.array.find"),t.exports=e("../../modules/$.core").Array.find},{"../../modules/$.core":11,"../../modules/es6.array.find":29}],4:[function(e,t,n){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":11,"../../modules/es6.object.assign":30}],5:[function(e,t,n){e("../../modules/es7.regexp.escape"),t.exports=e("../../modules/$.core").RegExp.escape},{"../../modules/$.core":11,"../../modules/es7.regexp.escape":31}],6:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],7:[function(e,t,n){t.exports=function(){}},{}],8:[function(e,t,n){var i=e("./$.ctx"),r=e("./$.iobject"),o=e("./$.to-object"),s=e("./$.to-length"),a=e("./$.array-species-create");t.exports=function(e){var t=1==e,n=2==e,u=3==e,c=4==e,l=6==e,h=5==e||l;return function(d,f,p){for(var v,y,m=o(d),g=r(m),_=i(f,p,3),b=s(g.length),w=0,E=t?a(d,b):n?a(d,0):void 0;b>w;w++)if((h||w in g)&&(v=g[w],y=_(v,w,m),e))if(t)E[w]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(c)return!1;return l?-1:u||c?c:E}}},{"./$.array-species-create":9,"./$.ctx":12,"./$.iobject":17,"./$.to-length":25,"./$.to-object":26}],9:[function(e,t,n){var i=e("./$.is-object"),r=e("./$.is-array"),o=e("./$.wks")("species");t.exports=function(e,t){var n;return r(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)||(n=void 0),i(n)&&(n=n[o],null===n&&(n=void 0))),new(void 0===n?Array:n)(t)}},{"./$.is-array":18,"./$.is-object":19,"./$.wks":28}],10:[function(e,t,n){var i={}.toString;t.exports=function(e){return i.call(e).slice(8,-1)}},{}],11:[function(e,t,n){var i=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=i)},{}],12:[function(e,t,n){var i=e("./$.a-function");t.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":6}],13:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],14:[function(e,t,n){var i=e("./$.global"),r=e("./$.core"),o=e("./$.ctx"),s="prototype",a=function e(t,n,a){var u,c,l,h=t&e.F,d=t&e.G,f=t&e.S,p=t&e.P,v=t&e.B,y=t&e.W,m=d?r:r[n]||(r[n]={}),g=d?i:f?i[n]:(i[n]||{})[s];d&&(a=n);for(u in a)c=!h&&g&&u in g,c&&u in m||(l=c?g[u]:a[u],m[u]=d&&"function"!=typeof g[u]?a[u]:v&&c?o(l,i):y&&g[u]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[s]=e[s],t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m[s]||(m[s]={}))[u]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},{"./$.core":11,"./$.ctx":12,"./$.global":16}],15:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],16:[function(e,t,n){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},{}],17:[function(e,t,n){var i=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},{"./$.cof":10}],18:[function(e,t,n){var i=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==i(e)}},{"./$.cof":10}],19:[function(e,t,n){t.exports=function(e){return"object"==(void 0===e?"undefined":a(e))?null!==e:"function"==typeof e}},{}],20:[function(e,t,n){var i=Object;t.exports={create:i.create,getProto:i.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:i.getOwnPropertyDescriptor,setDesc:i.defineProperty,setDescs:i.defineProperties,getKeys:i.keys,getNames:i.getOwnPropertyNames,getSymbols:i.getOwnPropertySymbols,each:[].forEach}},{}],21:[function(e,t,n){var i=e("./$"),r=e("./$.to-object"),o=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},n={},i=Symbol(),r="abcdefghijklmnopqrst";return t[i]=7,r.split("").forEach(function(e){n[e]=e}),7!=e({},t)[i]||Object.keys(e({},n)).join("")!=r})?function(e,t){for(var n=r(e),s=arguments,a=s.length,u=1,c=i.getKeys,l=i.getSymbols,h=i.isEnum;a>u;)for(var d,f=o(s[u++]),p=l?c(f).concat(l(f)):c(f),v=p.length,y=0;v>y;)h.call(f,d=p[y++])&&(n[d]=f[d]);return n}:Object.assign},{"./$":20,"./$.fails":15,"./$.iobject":17,"./$.to-object":26}],22:[function(e,t,n){t.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return(t+"").replace(e,n)}}},{}],23:[function(e,t,n){var i=e("./$.global"),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./$.global":16}],24:[function(e,t,n){var i=Math.ceil,r=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?r:i)(e)}},{}],25:[function(e,t,n){var i=e("./$.to-integer"),r=Math.min;t.exports=function(e){return e>0?r(i(e),9007199254740991):0}},{"./$.to-integer":24}],26:[function(e,t,n){var i=e("./$.defined");t.exports=function(e){return Object(i(e))}},{"./$.defined":13}],27:[function(e,t,n){var i=0,r=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+r).toString(36))}},{}],28:[function(e,t,n){var i=e("./$.shared")("wks"),r=e("./$.uid"),o=e("./$.global").Symbol;t.exports=function(e){return i[e]||(i[e]=o&&o[e]||(o||r)("Symbol."+e))}},{"./$.global":16,"./$.shared":23,"./$.uid":27}],29:[function(e,t,n){"use strict";var i=e("./$.export"),r=e("./$.array-methods")(5),o="find",s=!0;o in[]&&Array(1)[o](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./$.add-to-unscopables")(o)},{"./$.add-to-unscopables":7,"./$.array-methods":8,"./$.export":14}],30:[function(e,t,n){var i=e("./$.export");i(i.S+i.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":14,"./$.object-assign":21}],31:[function(e,t,n){var i=e("./$.export"),r=e("./$.replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(e){return r(e)}})},{"./$.export":14,"./$.replacer":22}],32:[function(e,t,n){function i(){return(new Date).getTime()}t.exports=Date.now||i},{}],33:[function(e,t,n){var i=e("date-now");t.exports=function(e,t,n){function r(){var l=i()-u;t>l&&l>0?o=setTimeout(r,t-l):(o=null,n||(c=e.apply(a,s),o||(a=s=null)))}var o,s,a,u,c;return null==t&&(t=100),function(){a=this,s=arguments,u=i();var l=n&&!o;return o||(o=setTimeout(r,t)),l&&(c=e.apply(a,s),a=s=null),c}}},{"date-now":32}],34:[function(e,t,n){!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t}}(Element.prototype)},{}],35:[function(e,t,n){var i=e("./lib/parser"),r=e("./lib/resource"),o=!1;t.exports={parse:function(e){return(new i).parse(e,o)},enableValidation:function(e){o=null==e||e},disableValidation:function(){o=!1},Resource:r}},{"./lib/parser":37,"./lib/resource":38}],36:[function(e,t,n){"use strict";function i(){arguments.length>=1?this._array=arguments[0]:this._array=[]}i.prototype.array=function(){return this._array},i.prototype.isEmpty=function(e){return 0===this._array.length},i.prototype.push=function(e){var t=this._array.slice(0);return t.push(e),new i(t)},i.prototype.pop=function(){var e=this._array.slice(0,this._array.length-1);return new i(e)},i.prototype.peek=function(){if(this.isEmpty())throw Error("can't peek on empty stack");return this._array[this._array.length-1]},t.exports=i},{}],37:[function(e,t,n){"use strict";function i(){}function r(e,t,n){if(null==e)return e;var i=o(e._links,t,n.push("_links")),r=s(i),a=u(e._embedded,t,n.push("_embedded")),l=new b(i,r,a,t);return c(e,l),l._original=e,l}function o(e,t,n){return e=l(e,d,t,n),null!=e&&null!=e.self||y("Resource does not have a self link",t,n),e}function s(e){return e?e.curies:[]}function u(e,t,n){var i=l(e,v,t,n);return null==i?i:(Object.keys(i).forEach(function(e){i[e]=i[e].map(function(i){var o=null!=t?[]:null,s=r(i,o,n.push(e));return s._original=i,s})}),i)}function c(e,t){Object.keys(e).forEach(function(n){"_links"!==n&&"_embedded"!==n&&(t[n]=e[n])})}function l(e,t,n,i){if(null==e)return e;var r={};return Object.keys(e).forEach(function(o){r[o]=h(o,e[o],t,n,i)}),r}function h(e,t,n,i,r){return f(t)?t.map(function(t){return n(e,t,i,r)}):[n(e,t,i,r)]}function d(e,t,n,i){if(!p(t))throw Error("Link object is not an actual object: "+t+" ["+(void 0===t?"undefined":a(t))+"]");var r=g(t);return Object.keys(E).forEach(function(t){null==r[t]&&(E[t].required&&y("Link misses required property "+t+".",n,i.push(e)),null!=E[t].defaultValue&&(r[t]=E[t].defaultValue))}),r.deprecation&&m("Warning: Link "+_(i.push(e))+" is deprecated, see "+r.deprecation),r.templated!==!0&&r.templated!==!1&&(r.templated=!1),n?(r.href&&r.href.indexOf("{")>=0&&!r.templated&&y('Link seems to be an URI template but its "templated" property is not set to true.',n,i.push(e)),r):r}function f(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){return"object"==(void 0===e?"undefined":a(e))}function v(e,t){return t}function y(e,t,n){t&&t.push({path:_(n),message:e})}function m(e){"undefined"!=typeof console&&"function"==typeof console.log&&void 0}function g(e){var t={};return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}function _(e){for(var t="$.",n=0;n<e.array().length;n++)t+=e.array()[n]+".";return t=t.substring(0,t.length-1)}var b=e("./resource"),w=e("./immutable_stack"),E={href:{required:!0,defaultValue:null},templated:{required:!1,defaultValue:!1},type:{required:!1,defaultValue:null},deprecation:{required:!1,defaultValue:null},name:{required:!1,defaultValue:null},profile:{required:!1,defaultValue:null},title:{required:!1,defaultValue:null},hreflang:{required:!1,defaultValue:null}};i.prototype.parse=function(e,t){var n=t?[]:null;return r(e,n,new w)},t.exports=i},{"./immutable_stack":36,"./resource":38}],38:[function(e,t,n){"use strict";function i(e,t,n,i){this._links=e||{},this._initCuries(t),this._embedded=n||{},this._validation=i||[]}function r(e,t){return null!=e?e[t]:null}function o(e,t,n){n=n||0;var i=r(e,t);return null!=i&&i.length>=1?i[n]:null}i.prototype._initCuries=function(e){if(this._curiesMap={},e){this._curies=e;for(var t=0;t<this._curies.length;t++){var n=this._curies[t];this._curiesMap[n.name]=n}}else this._curies=[];this._preResolveCuries()},i.prototype._preResolveCuries=function(){this._resolvedCuriesMap={};for(var e=0;e<this._curies.length;e++){var t=this._curies[e];if(t.name)for(var n in this._links)"curies"!==n&&this._preResolveCurie(t,n)}},i.prototype._preResolveCurie=function(e,t){var n=(this._links[t],t.split(/:(.+)/)),i=n[0];if(e.name===i)if(e.templated&&n.length>=1){var r=e.href.replace(/(.*){(.*)}(.*)/,"$1"+n[1]+"$3");this._resolvedCuriesMap[r]=t}else this._resolvedCuriesMap[e.href]=t},i.prototype.allLinkArrays=function(){return this._links},i.prototype.linkArray=function(e){return r(this._links,e)},i.prototype.link=function(e,t){return o(this._links,e,t)},i.prototype.hasCuries=function(e){return this._curies.length>0},i.prototype.curieArray=function(e){return this._curies},i.prototype.curie=function(e){return this._curiesMap[e]},i.prototype.reverseResolveCurie=function(e){return this._resolvedCuriesMap[e]},i.prototype.allEmbeddedResourceArrays=function(){return this._embedded},i.prototype.embeddedResourceArray=function(e){return r(this._embedded,e)},i.prototype.embeddedResource=function(e,t){return o(this._embedded,e,t)},i.prototype.original=function(){return this._original},i.prototype.validationIssues=function(){return this._validation},i.prototype.allLinks=i.prototype.allLinkArrays,i.prototype.allEmbeddedArrays=i.prototype.allEmbeddedResources=i.prototype.allEmbeddedResourceArrays,i.prototype.embeddedArray=i.prototype.embeddedResourceArray,i.prototype.embedded=i.prototype.embeddedResource,i.prototype.validation=i.prototype.validationIssues,t.exports=i},{}],39:[function(e,t,n){t.exports=function(e){var t={},n=[];e=e||this,e.on=function(e,n,i){(t[e]=t[e]||[]).push([n,i])},e.off=function(e,i){e||(t={});for(var r=t[e]||n,o=r.length=i?r.length:0;o--;)i==r[o][0]&&r.splice(o,1)},e.emit=function(e){for(var i,r=t[e]||n,o=0;i=r[o++];)i[0].apply(i[1],n.slice.call(arguments,1))}}},{}]},{},[1])(1)})},function(e,t,n){var i=n(48);"string"==typeof i&&(i=[[e.id,i,""]]);n(50)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(49)(),t.push([e.id,"/*! teleport-autocomplete - v0.3.1 | https://github.com/teleport/autocomplete#readme | MIT */.tp-ac__input,.tp-ac__list{width:100%;box-shadow:2px 2px 4px rgba(0,0,0,.35)}.tp-autocomplete{position:relative;max-width:25em}.tp-ac__input{padding:.25em;border:1px solid transparent;border-radius:0;background-color:#fafafa;font-size:1.25em;font-weight:700;-webkit-appearance:none;text-overflow:ellipsis}.tp-ac__input::-webkit-input-placeholder{color:#ccc;-webkit-font-smoothing:antialiased}.tp-ac__input::-moz-placeholder{color:#ccc;-webkit-font-smoothing:antialiased}.tp-ac__input:-ms-input-placeholder{color:#ccc;-webkit-font-smoothing:antialiased}.tp-ac__input::placeholder{color:#ccc;-webkit-font-smoothing:antialiased}.tp-ac__input:focus{outline:0}.tp-ac__input::-ms-clear{display:none}.spinner .tp-ac__input{padding-right:1.5em;margin-right:-1.5em}.tp-ac__list{position:absolute;z-index:1;margin:0;padding-left:0;list-style-type:none;color:#979797;background-color:#fff;font-size:.875em}.tp-ac__item{overflow:hidden;padding:.35714em .71429em;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis}.tp-ac__item.is-active,.tp-ac__item:hover{background-color:#ddd}.tp-ac__item.no-results,.tp-ac__item.no-results:hover{cursor:default;background-color:#fff}.tp-ac__item span{color:#4a4a4a;font-weight:700}@keyframes spinner{to{transform:rotate(1turn)}}.spinner:before{position:absolute;top:50%;right:.5em;width:1em;height:1em;margin-top:-.625em;margin-left:-.625em;content:'';animation:spinner 1s linear infinite;border:2px solid rgba(0,0,0,.3);border-top-color:rgba(0,0,0,.6);border-radius:50%}",""])},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(c(i.parts[o],t))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(c(i.parts[o],t));f[i.id]={id:i.id,refs:1,parts:s}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],s=r[1],a=r[2],u=r[3],c={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function o(e,t){var n=y(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function c(e,t){var n,i,r;if(t.singleton){var o=g++;n=m||(m=a(t)),i=l.bind(null,n,o,!1),r=l.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),i=d.bind(null,n),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),i=h.bind(null,n),r=function(){s(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function l(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function h(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,_=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=v()),void 0===t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=f[a.id];u.refs--,o.push(u)}if(e){var c=r(e);i(c,t)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete f[u.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(30),a=i(s),u=n(52),c=i(u),l=n(53),h=i(l),d={closeButton:"[data-city-viewer-item-close]",viewerItem:"[data-city-viewer-item]",viewerInner:"[data-city-viewer-inner]",activeClass:"active",preloaderOnAddCity:"[preloader-on-add-city]"},f=function(){function e(t){var n=this;r(this,e),this._elem=t,this._state={cities:0},t.addEventListener("click",this._manager.bind(this)),this.on("onAddedListOfCities",function(){n.isScroll()?n.trigger(n.constructor.EVENTS.isScroll):n.trigger(n.constructor.EVENTS.noScroll)}),this._checkState()}return o(e,[{key:"getItemHeight",value:function(){return this._elem.querySelector(d.viewerItem)?this._elem.querySelector(d.viewerItem).clientHeight:0}},{key:"getAllItemsHeight",value:function(){for(var e=this.getItemsLength(),t=this.getItemHeight(),n=this.getItemMarginBottom(),i=0,r=0;r<e;r++)i+=t+n;return i+=t}},{key:"isEmpty",value:function(){return 0===this.getItemsLength()}},{key:"showPreloaderOnAddCity",value:function(){var e=document.createElement("div"),t=this._elem.querySelector(d.viewerInner);if(e.className="city-viewer__preloader",e.setAttribute("preloader-on-add-city",""),!this.isEmpty()){var n=this._elem.querySelector(d.viewerItem),i=getComputedStyle(n);e.style.marginTop=i.marginTop,e.style.marginBottom=i.marginBottom,e.style.height=n.offsetHeight+"px"}t.scrollTop=0,t.insertBefore(e,t.firstElementChild),this.trigger(this.constructor.EVENTS.onShowPreloaderAddCity,this.isScroll())}},{key:"hidePreloaderOnAddCity",value:function(){var e=this,t=this._elem.querySelector(d.preloaderOnAddCity);t&&(t.parentNode.removeChild(t),setTimeout(function(){e.trigger(e.constructor.EVENTS.onHidePreloaderAddCity,e.isScroll())},0))}},{key:"showPreloaderOnCity",value:function(e){e.classList.add("show-preloader")}},{key:"hidePreloaderOnCity",value:function(e){e.classList.remove("show-preloader")}},{key:"lockViewer",value:function(){this._elem.classList.add("blocked")}},{key:"unlockViewer",value:function(){this._elem.classList.remove("blocked")}},{key:"getViewerHeight",value:function(){return this._elem.clientHeight}},{key:"getItemMarginBottom",value:function(){return this._elem.querySelector(d.viewerItem)?parseInt(getComputedStyle(this._elem.querySelector(d.viewerItem)).marginBottom):0;
}},{key:"getItemsLength",value:function(){return this._elem.querySelector(d.viewerInner).children.length||0}},{key:"isScroll",value:function(){return this.getAllItemsHeight()>this.getViewerHeight()}},{key:"addCity",value:function(e){var t=(0,c.default)(e),n=document.createElement("div");n.innerHTML=t;var i=n.firstElementChild,r=this._elem.querySelector(d.viewerInner);r.insertBefore(i,r.firstElementChild),this._setActiveClass(i),this.trigger(this.constructor.EVENTS.onAddCity,this.isScroll())}},{key:"addListOfCities",value:function(e){var t=(0,h.default)({cities:e}),n=this._elem.querySelector(d.viewerInner);n.insertAdjacentHTML("afterbegin",t),this.trigger(this.constructor.EVENTS.onAddedListOfCities)}},{key:"_manager",value:function(e){var t=e.target;if(t.closest(d.closeButton)){e.preventDefault();var n=t.closest(d.closeButton);return void this._deleteCity(n)}if(t.closest(d.viewerItem)){var i=t.closest(d.viewerItem);return void this._selectCity(i)}}},{key:"_selectCity",value:function(e){var t=e.getAttribute("data-geoId"),n=e.getAttribute("data-tzOffsetMinutes");this._setActiveClass(e),this.trigger(this.constructor.EVENTS.onSelectedCity,{geoId:t,tzOffsetMinutes:n})}},{key:"_deleteCity",value:function(e){var t=e.closest(d.viewerItem),n=t.getAttribute("data-geoId");t.parentNode.removeChild(t),t.classList.contains(d.activeClass)&&this._setNewActiveElement(),this._onDeleteCity(n)}},{key:"_setNewActiveElement",value:function(){var e=this,t=this._elem.querySelector(d.viewerItem);return t?(this._selectCity(t),void setTimeout(function(){e._setScrollTop()},0)):void this.trigger(this.constructor.EVENTS.onDeletAllCities)}},{key:"_setScrollTop",value:function(){document.body.classList.contains("isLandscape")?document.documentElement.clientWidth>=1024?this._elem.querySelector(d.viewerInner).scrollTop=0:window.scrollTo(0,0):this._elem.querySelector(d.viewerInner).scrollTop=0}},{key:"_setActiveClass",value:function(e){var t=this._elem.querySelectorAll(d.viewerItem);Array.prototype.slice.call(t).forEach(function(e){return e.classList.remove("active")}),e.classList.add("active")}},{key:"_onDeleteCity",value:function(e){this.trigger(this.constructor.EVENTS.onDeleteCity,parseInt(e)),this.getItemsLength()>0&&this.trigger(this.constructor.EVENTS.onDeleteCityGetDimention,this.isScroll())}},{key:"getState",value:function(){return this._state}},{key:"_checkState",value:function(){var e=this;this.on(this.constructor.EVENTS.onAddCity,function(){e._writeState()}),this.on(this.constructor.EVENTS.onAddedListOfCities,function(){e._writeState()}),this.on(this.constructor.EVENTS.onDeleteCity,function(){e._writeState()}),this.on(this.constructor.EVENTS.onDeletAllCities,function(){e._writeState()}),window.addEventListener("resize",function(){setTimeout(function(){e._writeState()},0)})}},{key:"_writeState",value:function(){this._state.cities=this.getItemsLength(),0===this.getItemsLength()?this._state.isScroll=!1:this._state.isScroll=this.isScroll(),this._state.isEmpty=this.isEmpty()}}],[{key:"EVENTS",get:function(){return{onSelectedCity:"onSelectedCity",onDeleteCity:"onDeleteCity",onDeletAllCities:"onDeletAllCities",onDeleteCityGetDimention:"onDeleteCityGetDimention",onAddCity:"onAddCity",isScroll:"isScroll",noScroll:"noScroll",onAddedListOfCities:"onAddedListOfCities",onShowPreloaderAddCity:"onShowPreloaderAddCity",onHidePreloaderAddCity:"onHidePreloaderAddCity"}}}]),e}();for(var p in a.default)f.prototype[p]=a.default[p];t.default=f},function(e,t,n){function i(e){var t,n="",i=e||{};return function(e,i,o){n=n+"\n<div"+(' class="city-viewer__item"'+r.attr("data-geoId",e,!0,!0)+r.attr("data-tzOffsetMinutes",o,!0,!0)+" data-city-viewer-item")+">"+r.escape(null==(t=i)?"":t)+'<a class="city-viewer__item-close" href="#" data-city-viewer-item-close></a></div>'}.call(this,"geoId"in i?i.geoId:"undefined"!=typeof geoId?geoId:void 0,"name"in i?i.name:"undefined"!=typeof name?name:void 0,"tzOffsetMinutes"in i?i.tzOffsetMinutes:"undefined"!=typeof tzOffsetMinutes?tzOffsetMinutes:void 0),n}var r=n(36);e.exports=i},function(e,t,n){function i(e){var t,n="",i=e||{};return function(e){(function(){var i=e;if("number"==typeof i.length)for(var o=0,s=i.length;o<s;o++){var a=i[o];n=n+"\n<div"+(r.attr("class",r.classes(["city-viewer__item "+(a.active?"active":"")],[!0]),!1,!0)+r.attr("data-geoId",a.id,!0,!0)+" data-city-viewer-item"+r.attr("data-tzOffsetMinutes",a.tzOffsetMinutes,!0,!0))+">"+r.escape(null==(t=a.name)?"":t)+'<a class="city-viewer__item-close" href="#" data-city-viewer-item-close></a></div>'}else{var s=0;for(var o in i){s++;var a=i[o];n=n+"\n<div"+(r.attr("class",r.classes(["city-viewer__item "+(a.active?"active":"")],[!0]),!1,!0)+r.attr("data-geoId",a.id,!0,!0)+" data-city-viewer-item"+r.attr("data-tzOffsetMinutes",a.tzOffsetMinutes,!0,!0))+">"+r.escape(null==(t=a.name)?"":t)+'<a class="city-viewer__item-close" href="#" data-city-viewer-item-close></a></div>'}}}).call(this)}.call(this,"cities"in i?i.cities:"undefined"!=typeof cities?cities:void 0),n}var r=n(36);e.exports=i}]);